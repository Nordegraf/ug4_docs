<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ug4: Using Git Locally Instead of SVN</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ug4
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>ug4</span></a></li>
      <li><a href="usergroup0.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('pageUsingGit.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Using Git Locally Instead of SVN </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#secGitSVNWarning">Warning on Usage</a></li>
<li class="level1"><a href="#secGitSVNGeneral">General Remarks on Git-SVN over Git-Only</a></li>
<li class="level1"><a href="#secGitSVNClone">Cloning SVN Repository</a><ul><li class="level2"><a href="#secGitConfig">Configuring Git</a><ul><li class="level3"><a href="#secGitConfigGitignore">Ignoring Files</a></li>
<li class="level3"><a href="#secGitConfigCredentials">Credentials</a></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><a href="#secGitSVNCommit">Committing Work</a></li>
<li class="level1"><a href="#secGitSVNCommitExample">The Full Workflow</a></li>
<li class="level1"><a href="#secGitSVNNotes">Further Notes</a></li>
</ul>
</div>
<div class="textblock"><p>Some people might want to use <em>Git</em> instead of <em>SVN</em> for their local working copy and development environment. This is even possible with a <em>SVN</em> server.</p>
<p>For any questions email <a href="#" onclick="location.href='mai'+'lto:'+'tor'+'bj'+'oer'+'n@'+'tor'+'bj'+'oer'+'n-'+'kla'+'tt'+'.de'; return false;">torbj<span style="display: none;">.nosp@m.</span>oern<span style="display: none;">.nosp@m.</span>@torb<span style="display: none;">.nosp@m.</span>joer<span style="display: none;">.nosp@m.</span>n-kla<span style="display: none;">.nosp@m.</span>tt.d<span style="display: none;">.nosp@m.</span>e</a></p>
<hr/>
 <h1><a class="anchor" id="secGitSVNWarning"></a>
Warning on Usage</h1>
<dl class="section attention"><dt>Attention</dt><dd><b>Please be aware that using <em>SVN</em> via <em>Git</em> is and will always be like walking on crutches!</b></dd></dl>
<p>This is due to the very nature of <em>Git</em> and <em>SVN</em>, which are completely different when it comes to dealing with commits, diffs and alike.</p>
<p>The <b>ug4</b> <em>SVN</em> server uses special access right managment based on user roles and paths. <em>Git</em> can not and will never be able to deal with partial checkouts and partial commits.</p>
<p>This problem surfaces, when the access rights to certain directories and paths are changed after commits have been done to those. You will get errors similar to the following when running <code>git svn fetch</code> or <code>git svn rebase</code>:</p>
<pre class="fragment">plugins/experimental/promesh/tools/remeshing_tools.h was not found in commit 30995e3b27a7cbff8908d1cc883b96ede9e2a694 (r10850)
</pre><dl class="section attention"><dt>Attention</dt><dd>Only use <em>git-svn</em> when you are very familiar with both <em>Git</em> and <em>SVN</em>. As well keep in mind, that you might be forced to reinitiate your <em>git-svn</em> clone from scratch and copy your local <em>Git</em> branches to the new clone. None of the <b>ug4</b> maintainers will guarantee functionality or support beside basic <em>SVN</em> help.</dd></dl>
<hr/>
 <h1><a class="anchor" id="secGitSVNGeneral"></a>
General Remarks on Git-SVN over Git-Only</h1>
<dl class="section attention"><dt>Attention</dt><dd>In short: <b>Never ever use <code>merge</code></b>. Neither on the <em>master</em> (i.e. SVN <em>trunk</em>), nor on any of your local branches, that you intend to maybe commit at some point to <em>SVN</em>. This is due to <em>SVN</em>'s nature of not being able to deal with a non-linear revision history.</dd></dl>
<p>When you are familiar with using <em>Git</em> and adopted the general <em>Git Workflow</em> (<code>pull</code> -&gt; <code>branch</code> -&gt; <code>checkout</code> -&gt; <em>work</em> -&gt; <code>add</code> -&gt; <code>commit</code> -&gt; <code>merge</code> / <code>rebase</code> -&gt; <code>push</code>), please read <code>git help svn</code> carefully. Especially the bottom sections from <em>Basic Example</em> down to <em>Caveats</em>.</p>
<hr/>
 <h1><a class="anchor" id="secGitSVNClone"></a>
Cloning SVN Repository</h1>
<p>Use </p><pre class="fragment">git svn clone svn://fuji.gcsc.uni-frankfurt.de/ug4/trunk ug4
</pre><p> for cloning the entire <em>SVN</em> repository. It will create the folder <code>ug4</code> with your working copy.</p>
<dl class="section attention"><dt>Attention</dt><dd>Don't do this with a weak or instable internet connection or while running low on battery.</dd></dl>
<p><em>Git</em> is going to retreive each and every revision ever done on that <em>SVN</em> repository and builds corresponding <em>Git</em> refs.</p>
<h2><a class="anchor" id="secGitConfig"></a>
Configuring Git</h2>
<h3><a class="anchor" id="secGitConfigGitignore"></a>
Ignoring Files</h3>
<p>To make sure, you are not commiting any files, which should be ignored, get the full (recursive) list of <code>svn:ignore</code> values and append it to your <code>.git/info/exclude</code> file: </p><pre class="fragment">git svn show-ignore &gt;&gt; .git/info/exclude
</pre><p> When ever you create a file, which should not be committed into <em>SVN</em>, append it to your <code>.git/info/exclude</code>: </p><pre class="fragment">echo "your_file" &gt;&gt; .git/info/exclude
</pre> <dl class="section remark"><dt>Remarks</dt><dd>Converting the <code>svn:ignore</code> values into <code>.gitignore</code> files is also possible with <code>git svn create-ignore</code>. According to the <em>Git</em> manual the <code>.gitignore</code> files are staged for committing, but actually are not committed.</dd></dl>
<p>However, it's more handy having all ignores in one file rather than <code>.gitignore</code> files in almost every directory.</p>
<h3><a class="anchor" id="secGitConfigCredentials"></a>
Credentials</h3>
<p>This section might be obsolete, but just in case ...</p>
<p>Before doing any work on your local working copy, add the following to the local <em>Git</em> config in <code>ug4/.git/config</code>: </p><pre class="fragment">[user]
  name = Torbjörn Klatt
  email = torbjoern@torbjoern-klatt.de
</pre><p> (Substitute your name and email).</p>
<hr/>
 <h1><a class="anchor" id="secGitSVNCommit"></a>
Committing Work</h1>
<p>As usually with <em>Git</em>, first create a local working branch </p><pre class="fragment">git checkout -b my_working_branch_name
</pre><p>And use the usual <em>Git</em> commands for adding (<code>git add &lt;file_or_folder&gt;</code>) and commiting (<code>git commit</code>) your work locally. Stashing work works also as usual (<code>git stash</code>).</p>
<p>Pushing however, works differently.</p>
<p>First make sure, you are up to date with the SVN repository: </p><pre class="fragment">git svn fetch
</pre><p>If nothing shows up, you are fine and can <em>dcommit</em> directly. Otherwise rebase your local working branch to be on <code>HEAD</code> of SVN: </p><pre class="fragment">git svn rebase
</pre><p> (and resolve possibly occuring conflicts).</p>
<p>Finally <em>dcommit</em> your work: </p><pre class="fragment">git svn dcommit
</pre><p> This will create a revision on the <em>SVN</em> server for every commit you did locally (e.g. <code>git commit</code>) and rebase your current branch to be at <code>HEAD</code> of <em>SVN</em>.</p>
<hr/>
 <h1><a class="anchor" id="secGitSVNCommitExample"></a>
The Full Workflow</h1>
<p>Here I will describe my general workflow of using <em>Git-SVN</em> with <b>ug4</b>'s <em>SVN</em> repository after a local working copy has been cloned.</p>
<ol>
<li>
<a class="anchor" id="stepGitWorkflow1"></a> Get local <em>master</em> up to date: <pre class="fragment">git checkout master
git svn fetch
git svn rebase</pre>  </li>
<li>
<a class="anchor" id="stepGitWorkflow2"></a> Switch to / create (then add '<code>-b</code>' after <code>checkout</code>) local working branch: <pre class="fragment">git checkout my_working_branch</pre> If not nealy created, make sure it's up to date with <em>SVN</em> : <pre class="fragment">git rebase master</pre> Only go on, if you resolved possibly occuring conflicts.  </li>
<li>
Repeat the following steps until you want to publish it to the <em>SVN</em> repository. <ul>
<li>
Work. </li>
<li>
<p class="startli">Add the things, you want to commit: </p><pre class="fragment">        git add rel/path/to/new_class.cpp rel/path/to/new_class.hpp</pre><dl class="section note"><dt>Note</dt><dd>You do not have to add all files at once. You can split them up in different commits.</dd></dl>
</li>
<li>
Let Git save it (i.e. add to history): <pre class="fragment">        git commit -m "added new_class def. + impl."</pre>  </li>
</ul>
</li>
<li>
Make sure, you are up to date with <em>SVN</em>, thus repeat steps <a class="el" href="pageUsingGit.html#stepGitWorkflow1">1</a> and <a class="el" href="pageUsingGit.html#stepGitWorkflow2">2</a>.  </li>
<li>
<em>dcommit</em> (i.e. <code>push</code>) your work to the SVN repository: <pre class="fragment">    git svn dcommit</pre>  </li>
<li>
Go to sleep, drink a beer or carry on with step <a class="el" href="pageUsingGit.html#stepGitWorkflow1">1</a>.  </li>
</ol>
<hr/>
 <h1><a class="anchor" id="secGitSVNNotes"></a>
Further Notes</h1>
<p>The following blog article was quite helpful for me when setting up <em>Git</em> with <em>SVN</em> the first time: <a href="http://www.justincarmony.com/blog/2011/02/21/using-git-with-subversion/">Justin Carmony &mdash; Using GIT with SVN (2011-02-11)</a>. It is a little more verbose than this page, but lists further resources down the bottom of the article. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">ug4 - Documentation</a></li><li class="navelem"><a class="el" href="pageUG4Development.html">Development</a></li><li class="navelem"><a class="el" href="pageUG4DevTipsGuides.html">Tips and Guidelines</a></li>
    <li class="footer">Generated on Wed Jan 13 2016 12:42:54 for ug4 by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
